> 管线化：http管线化（http pipelining）是将http请求整批送出去，而在传输的过程中不需要服务端响应；
详见：https://zh.wikipedia.org/zh-hans/HTTP%E7%AE%A1%E7%B7%9A%E5%8C%96
只有幂等性的请求才可以被管道化；比如GET和HEAD。
我们不应该在建立新连接的时候发出管道化的请求 ，因为不能确源服务或代理是否支持HTTP/1.1。因此，管道化只能利用已存在的keep-aliv连接。
PUT是幂等的；post、PATCH不是；这就意味着连续多个的相同请求会产生不同的效果。而连续调用多次POST方法可能会有副作用，比如将一个订单重复提交多次。
幂等性：是指一次和多次请求某一个资源应该具有同样的副作用。
HTTP管道化不是HTTP2的内容，是对HTTP1.1协议下，服务器不能很好处理并行请求的一个改进。

> 长链接
在HTTP/1.0中默认使用短连接。也就是说，客户端和服务器每进行一次HTTP操作，就建立一次连接，任务结束就中断连接。当客户端浏览器访问的某个HTML或其他类型的Web页中包含有其他的Web资源（如JavaScript文件、图像文件、CSS文件等），每遇到这样一个Web资源，浏览器就会重新建立一个HTTP会话。
而从HTTP/1.1起，默认使用长连接，用以保持连接特性。使用长连接的HTTP协议，会在响应头加入这行代码：
Connection:keep-alive
在使用长连接的情况下，当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的TCP连接不会关闭，客户端再次访问这个服务器时，会继续使用这一条已经建立的连接。Keep-Alive不会永久保持连接，它有一个保持时间，可以在不同的服务器软件（如Apache）中设定这个时间。实现长连接需要客户端和服务端都支持长连接。
HTTP协议的长连接和短连接，实质上是TCP协议的长连接和短连接。
> util.promisify可以把回调变成promise；util是个npm包；
### 状态码
- 200 请求成功，默认状态下状态码200的响应可以被缓存，put/delete 返回204 or 201；
- 201 这个状态码的常规使用场景是作为 POST 请求的返回值。
- 202 这个请求码表示server端已经收到请求了，但是尚未处理；这个状态码被设计用来将请求交由另一个进程或者服务器来进行处理，或是对请求进行批处理；
- 203 简单的说就是通过代理原始服务器成功的获取了原始服务器的返回内容，但是对代理内容做了一些改动，通过状态码告诉用户，成功获取内容，但是这部分内容和原始服务器的返回内容可能不完全一致；
- 204 表示请求已经成功了，但是客户端不需要离开当前页面；
- 205 用来通知客户端重置文档视图，比如清空表单内容，重置canvas状态或者刷新用户界面；
- 206 成功状态响应代码表示请求已成功，并且主体包含所请求的数据区间，该数据区间是在请求的 Range 首部指定的......
- 300 是一个用来表示重定向的状态码；基本不用；😢；
- 301 永久重定向，例如：http://music.baidu.com/；尽管标准要求浏览器在收到该响应并进行重定向时不应该修改http method和body，但是有一些浏览器可能会有问题。所以最好是在应对GET 或 HEAD 方法时使用301，其他情况使用308 来替代301。
- 302  暂时重定向；缺陷类似于301；
- 303  通常作为 PUT 或 POST 操作的返回结果，它表示重定向链接指向的不是新上传的资源，而是另外一个页面，比如消息确认页面或上传进度页面。而请求重定向页面的方法要总是使用 GET。
- 304 缓存
- 307 暂时重定向；优点类似于307；
- 308 永久重定向，说明请求的资源已经被永久移动到新的url上，在重定向过程中，🌟请求方法和消息主体不会发生改变；而301状态码的情况下，请求方法有时候会被客户端错误修改为get方法；
- 500 server端错误
- 501 405（不允许）和501（没实现）；比如url只是实现了get方法，但是没实现post方法，用post方法访问该接口就返回405；但是用LINK方法就会返回501，因为koa这个框架不支持LINK这个生僻方法；
- 502 是http协议的服务器端错误状态代码，它表示作为网关或者代理角色的服务器，502错误通常不是客户端能够修复的，而是需要由途径的Web服务器或者代理服务器对其进行修复。
- 503 通常造成这种原因是由于服务器停机维护或者已经超载；
- 504 表示扮演网关或者代理的服务器无法在规定的时间内获得想要的响应；
- 505 表示服务器不支持请求所使用的http版本；
- 400 客户端错误
- 401 未鉴权
- 403 禁止访问/没有权限
- 404 访问资源不存在
- 405 405（不允许）和501（没实现）；比如url只是实现了get方法，但是没实现post方法，用post方法访问该接口就返回405；但是用LINK方法就会返回501，因为koa这个框架不支持LINK这个生僻方法；
- 409 409表示请求与服务端目标资源的当前状态相互冲突（例如：创建用户，用户已经存在；上传文件的时候上传版本号比服务器已经存在的要旧.etc.）
- 412 先决条件失败；412表示客户端错误，意味着对于目标资源的访问请求被拒绝；
- 422 表示服务器理解请求实体的内容类型，并且请求实体语法是正确的，但是服务器无法处理所包含的指令；

